<!DOCTYPE html>
<html>

<head>
        <title> Integrating the GRT into an iPhone Project • Nick Arner </title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="apple-touch-icon" sizes="180x180"  href="/favicon.ico"> 
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"> 
        <link rel="icon" type="image/png" sizes="16x16"  href="/favicon.ico"> 

        
        <meta property="og:url" content="https://nickarner.com" />
        <meta property="og:title" content="Integrating the GRT into an iPhone Project" />
        <meta property="og:description" content="Nick&#39;s Arner&#39;s website." />
        <meta property="og:image" content="https://nickarner.com/card.jpg" />

        
        <meta name="twitter:card" content="summary">
        <meta name="twitter:creator" content="@joodaloop">
        <meta name="twitter:title" content="Integrating the GRT into an iPhone Project">
        <meta name="twitter:description" content="Nick&#39;s Arner&#39;s website." />
        <meta name="twitter:image" content="https://nickarner.com/card.jpg" />

        <meta name="description" content="Nick&#39;s Arner&#39;s website.">
        <link rel="stylesheet" type="text/css" href="/css/styles.css" />
</head>

<body>    
    
<main>
        <div class=left>
                <div class=menu>

	<nav>
		<div class="home">
			<a href="/"> Nick Arner </a>
		</div>
		<a href="/projects_and_work"> Projects </a>
		<a href="/investing"> Investments </a>
		<a href="/notes"> Notes </a>
		<a href="/books"> Books </a>
		<a href="/publications"> Publications </a>
	</nav>
</div>
        </div><div class=content>
                <article>

<h1>Integrating the GRT into an iPhone Project</h1>
      <div class=date>Published on Aug 29, 2017 </div>
      <p>In this blog post, I&rsquo;ll show you to add the <a href="https://github.com/nickgillian/grt" target="_blank" class="external-link" >Gesture Recognition Toolkit</a> to an iPhone app. Created by <a href="http://www.nickgillian.com/" target="_blank" class="external-link" >Nick GIllian</a> while he was a post-doc at MIT, the GRT is a &ldquo;cross-platform, open-source, C++ machine learning library designed for real-time gesture recognition&rdquo;.  I had known from this <a href="https://github.com/nickgillian/grt/issues/24" target="_blank" class="external-link" >issue on GitHub</a> that the GRT has been used in iOS development. I was only able to find <a href="https://github.com/magnusja/WatchGRT" target="_blank" class="external-link" >one example</a> of this in action, which this guide is partially based upon.</p>
<p>To add the GRT to an iOS project, we&rsquo;re going to create a CocoaTouch framework from the GRT source files. We&rsquo;ll also include an Objective-C++ wrapper that will allow us to easily interface between the framework, and the Swift code in our application. To get started, we need to do a bit of set-up work first.</p>
<p>First, create the folder where you want your project to live. Clone GRT as a submodule by using the commands:</p>
<ul>
<li>git submodule init</li>
<li>git submodule add <a href="https://github.com/nickgillian/grt.git" target="_blank" class="external-link" >https://github.com/nickgillian/grt.git</a></li>
</ul>
<p>Create a new Xcode project. Set the target be a CocoaTouch Framework. Note that if you want to use the GRT in a watchOS project, the steps below will be the same, just with a watchOS Framework target, rather than a CocoaTouch Framework target:</p>
<p><img src="/blog_assets/2017/iOS&#43;CocoaTouch&#43;Framework.jpg" alt="iOS&#43;CocoaTouch&#43;Framework" title="iOS&#43;CocoaTouch&#43;Framework"  />
</p>
<p>Note that if you want to use the GRT in a watchOS project, the steps below will be the same, just with a watchOS Framework target, rather than a CocoaTouch Framework target:</p>
<p><img src="/blog_assets/2017/watchOS&#43;CocoaTouch&#43;Framework.jpg" alt="watchOS&#43;CocoaTouch&#43;Framework" title="watchOS&#43;CocoaTouch&#43;Framework"  />
</p>
<p>Copy the GRT folder into the project, making sure that the files are added to the framework target.</p>
<p><img src="/blog_assets/2017/GRT&#43;folder.jpg" alt="GRT&#43;folder" title="GRT&#43;folder"  />
</p>
<p>&ldquo;Copy items if needed&rdquo; should be selected.</p>
<p><img src="/blog_assets/2017/Copying&#43;to&#43;framework.jpg" alt="Copying&#43;to&#43;framework" title="Copying&#43;to&#43;framework"  />
</p>
<p>In order to access the GRT from an iOS app, we&rsquo;ll need to create an Objective-C wrapper. This will allow us to call down into the GRT C++ code from Objective-C or Swift. <a href="https://github.com/magnusja" target="_blank" class="external-link" >Magnus Jahnen</a>, the author of the previously mentioned, watchGRT repository, created <a href="https://github.com/magnusja/grt/tree/501160c5883aa030235edaaeab43525866134c6d/iOS/ObjCWrapper" target="_blank" class="external-link" >some wrapper files</a> which I&rsquo;ve modified for this particular project. You can grab these modified files here and add them to your project,</p>
<p>Essentially, what we&rsquo;re doing is allowing a GRT pipeline to be created by the framework from our Swift-based app. The <a href="https://github.com/nickgillian/grt/blob/master/GRT/CoreModules/GestureRecognitionPipeline.h" target="_blank" class="external-link" >GestureRecognitionPipeline</a> is the core object of the GRT. It allows you to set-up a gesture recognition system with modules that will perform <a href="https://github.com/nickgillian/grt/tree/master/GRT/PreProcessingModules" target="_blank" class="external-link" >pre-processing</a> on incoming data (say, from an iPhone&rsquo;s accelerometer or gyroscope), configure a <a href="https://github.com/nickgillian/grt/tree/master/GRT/ClassificationModules" target="_blank" class="external-link" >classification module</a> for identifying the gesture performed, and then applying any <a href="https://github.com/nickgillian/grt/tree/master/GRT/PostProcessingModules" target="_blank" class="external-link" >post-processing</a> needed to make sure that</p>
<p>The init method of our GestureRecognitionPipeline.mm file call&rsquo;s down to the GRT code, and creates an instance of a pipeline:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-objective-c" data-lang="objective-c"><span style="display:flex;"><span>- (<span style="color:#66d9ef">instancetype</span>)<span style="color:#a6e22e">init</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    self <span style="color:#f92672">=</span> [super init];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (self) {
</span></span><span style="display:flex;"><span>        self.instance <span style="color:#f92672">=</span> new GRT<span style="color:#f92672">::</span>GestureRecognitionPipeline;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Redirect cout to NSLog
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        self.nsLogStream <span style="color:#f92672">=</span> new NSLogStream(std<span style="color:#f92672">::</span>cout);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The last step here is to compile the framework. Note that if you make any changes to the Objective-C wrapper, you will need to compile the framework again - whatever functionality from the GRT that you want to add to your app will need to be exposed accordingly in the wrapper.</p>
<p>Now that we&rsquo;ve finished setting up the framework, we can go ahead and add it to an iOS project.</p>
<p>Create a new target for an iOS app. I&rsquo;ve named mine &ldquo;GRT-iOS-HelloWorld&rdquo;:</p>
<p><img src="/blog_assets/2017/HelloWorld&#43;App.jpg" alt="HelloWorld&#43;App" title="HelloWorld&#43;App"  />
</p>
<p>We&rsquo;ll go ahead and add the framework to our new app:</p>
<p><img src="/blog_assets/2017/Adding&#43;framework.jpg" alt="Adding&#43;framework" title="Adding&#43;framework"  />
</p>
<p>Finally, let&rsquo;s import the GRT-iOS framework, to verify that we can create objects from the GRT. Create a Bridging-Header file, and add this line to it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-objective-c" data-lang="objective-c"><span style="display:flex;"><span><span style="color:#75715e">#import &lt;GRTTiOS/GRTiOS.h&gt;
</span></span></span></code></pre></div><p>Now, we can create an instance of a GRT Pipeline in our view controller&rsquo;s viewDidLoad method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> pipeline = GestureRecognitionPipeline()
</span></span></code></pre></div><p>Build and run the app to verify that there are no compile errors. If not, then you&rsquo;ve successfully added the GRT to your iPhone project!</p>
<p>The app doesn&rsquo;t do anything yet; in a future post, I&rsquo;ll show how I implemented a real-time gesture recognition system using the GRT on iOS. You can download the project <a href="https://github.com/narner/GRT-iOS-HelloWorld" target="_blank" class="external-link" >here</a>.</p>

       

                </article>
                <footer> © Copyright Nicholas Arner, 2023  </footer>
        </div>
        
</main>

        
</body>
</html>